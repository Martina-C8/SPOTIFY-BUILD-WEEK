<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spotify Clone - Artist</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/60ec5e93bb.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/custom.css">
</head>
<body class="d-flex flex-column">
  <div class="sidebar">
    <div class="container1">
    <a href="index.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-spotify" viewBox="0 0 16 16">
        <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0m3.669 11.538a.5.5 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686m.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858m.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288"/>
      </svg> Spotify</a>
    <a href="#home"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
        <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
      </svg> Home</a>
    <a href="#search"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
      </svg> Search</a>
      <div class="mb-3">
        <input type="text" id="searchInput" class="form-control" placeholder="Cerca un artista">
        <button class="btn btn-primary mt-2" onclick="searchArtist()">Cerca</button>
      </div>
  

      </div>

      <div class="container2">
        <div class="library d-flex justify-content-between">
            <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-music-note-list" viewBox="0 0 16 16">
            <path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2"/>
            <path fill-rule="evenodd" d="M12 3v10h-1V3z"/>
            <path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1z"/>
            <path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5m0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5"/>
          </svg> Your library</a>
          <svg class="mt-3 mx-3" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
          </svg>
        </div>
        <div class="playlist">
          <h5>Create your first playlist</h5>
          <p>It's easy, we'll help you</p>
          <button type="button" class="btn1 btn-light"><p>Create playlist</p></button>
        </div>
        <div class="follow">
          <h5 class="mt-3">Let's find some podcasts to follow</h5>
          <p>We'll keep you updated on new episodes</p>
          <button type="button" class="btn2 btn-light">Browse podcasts</button>
        </div>
      </div>
    
      <div class="sideFooter">
        <div class="first d-flex">
          <a href="#">Legal</a>
          <a href="#">Safety & Privacy center</a>
          <a href="#">Privacy Policy</a>
        </div>
        <div class="second d-flex">
          <a href="#">Cookie settings</a>
          <a href="#">About Ads</a>
          <a href="#">Accessibility</a>
        </div>
        <div class="third d-flex">
          <a href="#">Cookies</a>
        </div>

        <button type="button" class="btn3 btn-light mt-3"><p><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16">
          <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m7.5-6.923c-.67.204-1.335.82-1.887 1.855A8 8 0 0 0 5.145 4H7.5zM4.09 4a9.3 9.3 0 0 1 .64-1.539 7 7 0 0 1 .597-.933A7.03 7.03 0 0 0 2.255 4zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a7 7 0 0 0-.656 2.5zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5zM8.5 5v2.5h2.99a12.5 12.5 0 0 0-.337-2.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5zM5.145 12q.208.58.468 1.068c.552 1.035 1.218 1.65 1.887 1.855V12zm.182 2.472a7 7 0 0 1-.597-.933A9.3 9.3 0 0 1 4.09 12H2.255a7 7 0 0 0 3.072 2.472M3.82 11a13.7 13.7 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5zm6.853 3.472A7 7 0 0 0 13.745 12H11.91a9.3 9.3 0 0 1-.64 1.539 7 7 0 0 1-.597.933M8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855q.26-.487.468-1.068zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.7 13.7 0 0 1-.312 2.5m2.802-3.5a7 7 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7 7 0 0 0-3.072-2.472c.218.284.418.598.597.933M10.855 4a8 8 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4z"/>
        </svg>  English</p></button>
      </div>
     <!--si chiude la sidebar nel div sotto --> 
  </div>
  <main style="margin-left: 23%;">
  <div id="divAn" class="container position-relative">
    
 
      
    <h1 id="artistName" class="ps-4 text-white position-absolute">Artist Name</h1></div>
    <!-- Barra di ricerca -->
    <!--Fuerte-->
 
    <section class="row container">
<!--       <ul class="d-flex list-unstyled align-items-center col-12">
        <li class="bg-success br-50 me-3"><i class="fa-solid fa-play p-3"></i></li>
        <li class="border-white border-2 me-3 text-white">Follow</li>
        <li><i class="fa-solid fa-ellipsis text-white"></i></li>
      </ul> -->
      <h3 class="col-12 text-white">Popular</h3>
      <ul class="list-unstyled col-8">
     
      </ul>
      <div class="cardAn col-4 d-flex">
        
      </div>
    
    </section>
        <!--Fuerte-->
    <h3 class="text-white">Popular releases</h3>
    <div class="row" id="artistAlbums"></div>
    <h3 class="text-white">Albums</h3>
    <div class="row" id="popularAlbums"></div>
    <h3 class="text-white">On Tour</h3>
    <aside class="row">
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
    <section class="d-flex text-white col-4">
      <ul class="d-flex flex-column list-unstyled pe-3"><li class="px-2">Jun</li><li class="px-2">23</li></ul>
      <ul class="d-flex flex-column list-unstyled"><li>Ferrara</li><li>Saturday 23, 19PM</li></ul>
    </section>
  </aside>
  </main>
  <script>
   const ARTIST_ENDPOINT = "https://striveschool-api.herokuapp.com/api/deezer/artist/";

// Funzione asincrona per ottenere dati da una URL tramite fetch API
const getData = async (url) => {
  const response = await fetch(url); // Esegue una richiesta HTTP GET alla URL specificata
  const data = await response.json(); // Estrae il corpo della risposta e lo interpreta come JSON
  return data; // Ritorna i dati sotto forma di oggetto JavaScript
};

// Funzione per visualizzare l'artista ricevuto come parametro
const displayArtist = (artist) => {
  document.getElementById("artistName").innerText = artist.name; // Imposta il nome dell'artista nel DOM

  // Esegue una ricerca per gli album dell'artista
  getData(`https://striveschool-api.herokuapp.com/api/deezer/search?q=${artist.name}`)
    .then(displayAlbums) // Visualizza gli album trovati chiamando la funzione displayAlbums
    .catch((error) => console.error("Error fetching albums:", error)); // Gestisce gli errori in caso di fallimento della ricerca degli album
};

// Funzione per visualizzare gli album ricevuti come parametro
const displayAlbums = (data) => {
  const artistAlbums = document.getElementById("artistAlbums"); // Ottiene il riferimento al div #artistAlbums dal DOM
  artistAlbums.innerHTML = ""; // Svuota i risultati precedenti nel div
//CODICE ANDREA PARTE 1
const DIV = document.querySelector("div.container")
 console.log(DIV)
 data.data.slice(0,1).forEach(album => {
  console.log(album)
  const IMGAN = document.createElement("img")
  IMGAN.className = "w-100 h-300"
  IMGAN.src = `${album.album.cover_medium}`
  DIV.appendChild(IMGAN) 

 })


const listUn = document.querySelector(".list-unstyled")
listUn.innerHTML = ""
  data.data.slice(0, 5).forEach((album) => {
    // Popola ul list-unstyled
   console.log(album)
   const LI = document.createElement("li")
   LI.className = "row text-white"
   const P = document.createElement("span")
   const PA = document.createElement("span")
   const PAR = document.createElement("span")
   
 


   P.className = "col d-flex"
   PA.className = "col"
   PAR.className = "col d-flex"
   P.innerHTML = "<i class='fa-solid fa-play d-none pe-2'></i>  <span>" + album.title + "<span>"
   PA.innerText =  `${album.rank}`//`${album.duration}` + "m/se"
   PAR.innerHTML = "<i class='fa-regular fa-heart d-none pe-2'></i>  <p class='pe-2'>" + album.duration + "m/se<p>  <i class='fa-solid fa-ellipsis d-none'></i>"
   LI.appendChild(P)
   LI.appendChild(PA)
   LI.appendChild(PAR)
   listUn.appendChild(LI)

  
  });
  const card = document.querySelector(".cardAn")
  card.innerHTML = ""
  data.data.slice(0, 1).forEach((album) => {
    // Popola div card
   console.log(album)
 card.innerHTML += `

          <img src="${album.album.cover_small}" class="h-50 br-20">

<div class="d-flex flex-column ps-2">            <h5 class="card-title text-white">${album.title}</h5>
            <h6 class="card-title br-20 p-2 bg-white">${album.artist.name}</h6><div>`
     ;
  
  });
//CODICE ANDREA PARTE1 (CAMBIO RIGA 95, SOTTO)
  // Itera sui primi 10 album nell'array di dati ricevuto
  data.data.slice(5, 11).forEach((album) => {
    // Costruisce il markup HTML per ogni album e lo aggiunge al div #artistAlbums
    artistAlbums.innerHTML += `
      <div class="col-12 col-sm-6 col-md-4 col-lg-2 mb-4">
        <div class="card position-relative bg-tra">
          <img src="${album.album.cover_medium}" class="card-img-top br-20" alt="${album.album.title}">
          <div class="card-body">
            <h5 class="card-title text-white">${album.album.title}</h5>
           
          </div>
           <a href="album.html?id=${album.album.id}" class="btn btn-primary position-absolute br-50 d-none"><i class='fa-solid fa-play p-2'></i></a>
        </div>
      </div>`;
  });
  //CODICE ANDREA PARTE2
  const albumList = document.getElementById("popularAlbums");
  albumList.innerHTML = ""
  data.data.slice(23, 25).forEach((album) => {
    // Costruisce il markup HTML per ogni album e lo aggiunge al div #artistAlbums
    albumList.innerHTML += `
      <div class="col-12 col-sm-6 col-md-3 col-lg-2 mb-4">
        <div class="card bg-tra position-relative">
          <img src="${album.album.cover_medium}" class="card-img-top br-20" alt="${album.album.title}">
          <div class="card-body">
            <h5 class="card-title text-white">${album.album.title}</h5>
            
          </div>
          <a href="album.html?id=${album.album.id}" class="btn btn-primary position-absolute br-50 d-none"><i class='fa-solid fa-play p-2'></i></a>
        </div>
      </div>`;
  });
  //CODICE ANDREA PARTE2
  
};

// Funzione per gestire la ricerca degli album
const searchAlbums = () => {
  const searchInput = document.getElementById("searchInput").value; // Ottiene il valore dell'input di ricerca
  if (searchInput.trim() !== "") { // Controlla se l'input non è vuoto dopo aver rimosso gli spazi
    getData(`https://striveschool-api.herokuapp.com/api/deezer/search?q=${searchInput}`)
      .then(displayAlbums) // Visualizza gli album risultanti dalla ricerca
      .catch((error) => console.error("Error fetching albums:", error)); // Gestisce gli errori in caso di fallimento della ricerca
  } else {
    // Mostra tutti gli album dell'artista se la ricerca è vuota
    const urlParams = new URLSearchParams(window.location.search);
    const artistId = urlParams.get('id'); // Ottiene l'ID dell'artista dall'URL
    getData(`https://striveschool-api.herokuapp.com/api/deezer/artist/${artistId}/albums`)
      .then(displayAlbums) // Visualizza gli album dell'artista ottenuti dalla richiesta
      .catch((error) => console.error("Error fetching albums:", error)); // Gestisce gli errori in caso di fallimento della richiesta
  }
};

// Event listener che si attiva quando il documento HTML è stato completamente caricato
document.addEventListener("DOMContentLoaded", () => {
  const urlParams = new URLSearchParams(window.location.search);
  const artistId = urlParams.get('id'); // Ottiene l'ID dell'artista dall'URL
  if (artistId) { // Verifica se è presente un ID dell'artista nell'URL
    getData(ARTIST_ENDPOINT + artistId)
      .then(displayArtist) // Visualizza i dettagli dell'artista chiamando la funzione displayArtist
      .catch((error) => console.error("Error fetching artist data:", error)); // Gestisce gli errori in caso di fallimento della richiesta dei dati dell'artista
  }
});
  </script>
</body>
</html>
